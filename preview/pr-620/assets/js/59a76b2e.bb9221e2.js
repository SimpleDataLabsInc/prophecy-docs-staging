"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[81938],{28453:(n,e,i)=>{i.d(e,{R:()=>d,x:()=>o});var s=i(96540);const r={},t=s.createContext(r);function d(n){const e=s.useContext(t);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),s.createElement(t.Provider,{value:e},n.children)}},69846:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"analysts/development/gems/transform/window","title":"WindowFunction","description":"Create moving aggregations and transformation","source":"@site/docs/analysts/development/gems/transform/window.md","sourceDirName":"analysts/development/gems/transform","slug":"/analysts/window","permalink":"/prophecy-docs-staging/preview/pr-620/analysts/window","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"gems","permalink":"/prophecy-docs-staging/preview/pr-620/tags/gems"},{"inline":true,"label":"analyst","permalink":"/prophecy-docs-staging/preview/pr-620/tags/analyst"},{"inline":true,"label":"transform","permalink":"/prophecy-docs-staging/preview/pr-620/tags/transform"}],"version":"current","frontMatter":{"title":"WindowFunction","id":"window","slug":"/analysts/window","description":"Create moving aggregations and transformation","tags":["gems","analyst","transform"]},"sidebar":"mySidebar","previous":{"title":"Transpose","permalink":"/prophecy-docs-staging/preview/pr-620/analysts/transpose"},"next":{"title":"DataCleansing","permalink":"/prophecy-docs-staging/preview/pr-620/analysts/data-cleansing"}}');var r=i(74848),t=i(28453);const d={title:"WindowFunction",id:"window",slug:"/analysts/window",description:"Create moving aggregations and transformation",tags:["gems","analyst","transform"]},o=void 0,a={},l=[{value:"Parameters",id:"parameters",level:3},{value:"Examples",id:"examples",level:3},{value:"Ranking Functions with Window",id:"ranking-functions-with-window",level:4},{value:"Analytical Functions with Window",id:"analytical-functions-with-window",level:4},{value:"Aggregate Functions with Window",id:"aggregate-functions-with-window",level:4}];function c(n){const e={admonition:"admonition",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{class:"badge",children:"SQL"}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(e.p,{children:["The WindowFunction lets you define a ",(0,r.jsx)(e.strong,{children:"WindowSpec"})," and apply window functions on a model."]}),"\n",(0,r.jsx)(e.h3,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Parameter"}),(0,r.jsx)(e.th,{children:"Description"}),(0,r.jsx)(e.th,{children:"Required"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Model"}),(0,r.jsx)(e.td,{children:"Input Source"}),(0,r.jsx)(e.td,{children:"True"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Target column"}),(0,r.jsx)(e.td,{children:"Output Column name"}),(0,r.jsx)(e.td,{children:"True"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Source expression"}),(0,r.jsx)(e.td,{children:"Window function expression to perform over the created Window"}),(0,r.jsx)(e.td,{children:"True"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Order columns"}),(0,r.jsxs)(e.td,{children:["Columns to order by in Window. Must be a numeric type column if a ",(0,r.jsx)(e.code,{children:"Range Frame"})," is selected"]}),(0,r.jsxs)(e.td,{children:["Required when ",(0,r.jsx)(e.code,{children:"Source expression"})," has a Ranking/Analytical function ",(0,r.jsx)(e.strong,{children:"OR"})," when ",(0,r.jsx)(e.code,{children:"Range Frame"})," is selected"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Partition column"}),(0,r.jsx)(e.td,{children:"Column to partition by in Window"}),(0,r.jsx)(e.td,{children:"False"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Row frame"}),(0,r.jsx)(e.td,{children:"Row based frame boundary to apply on Window"}),(0,r.jsx)(e.td,{children:"False"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Range frame"}),(0,r.jsx)(e.td,{children:"Range based frame boundary to apply on Window"}),(0,r.jsx)(e.td,{children:"False"})]})]})]}),"\n",(0,r.jsxs)(e.admonition,{type:"info",children:[(0,r.jsxs)(e.p,{children:["When ",(0,r.jsx)(e.code,{children:"Order Columns"})," ",(0,r.jsx)(e.strong,{children:"are not"})," defined, this gem uses an unbounded window frame ",(0,r.jsx)(e.code,{children:"(rowFrame, unboundedPreceding, unboundedFollowing)"})," by default."]}),(0,r.jsxs)(e.p,{children:["When ",(0,r.jsx)(e.code,{children:"Order Columns"})," ",(0,r.jsx)(e.strong,{children:"are"})," defined, this gem uses a growing window frame ",(0,r.jsx)(e.code,{children:"(rangeFrame, unboundedPreceding, currentRow)"})," by default."]})]}),"\n",(0,r.jsx)(e.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(e.h4,{id:"ranking-functions-with-window",children:"Ranking Functions with Window"}),"\n",(0,r.jsxs)(e.p,{children:["Examples of ranking functions are: ",(0,r.jsx)(e.code,{children:"row_number()"}),", ",(0,r.jsx)(e.code,{children:"rank()"}),", ",(0,r.jsx)(e.code,{children:"dense_rank()"})," and ",(0,r.jsx)(e.code,{children:"ntile()"})]}),"\n",(0,r.jsx)(e.admonition,{type:"info",children:(0,r.jsxs)(e.p,{children:["Only the default window frame ",(0,r.jsx)(e.code,{children:"(rowFrame, unboundedPreceding, currentRow)"})," can be used with Ranking functions"]})}),"\n",(0,r.jsx)(e.h4,{id:"analytical-functions-with-window",children:"Analytical Functions with Window"}),"\n",(0,r.jsxs)(e.p,{children:["Examples of analytical functions are: ",(0,r.jsx)(e.code,{children:"lead()"}),", ",(0,r.jsx)(e.code,{children:"lag()"}),", ",(0,r.jsx)(e.code,{children:"cume_dist()"}),", etc."]}),"\n",(0,r.jsx)(e.admonition,{type:"info",children:(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["A window frame for ",(0,r.jsx)(e.code,{children:"lead()"})," and ",(0,r.jsx)(e.code,{children:"lag()"})," can not be specified."]}),"\n",(0,r.jsxs)(e.li,{children:["Only the default window frame ",(0,r.jsx)(e.code,{children:"(rangeFrame, unboundedPreceding, currentRow)"})," can be used with ",(0,r.jsx)(e.code,{children:"cume_dist()"})]}),"\n"]})}),"\n",(0,r.jsx)(e.h4,{id:"aggregate-functions-with-window",children:"Aggregate Functions with Window"}),"\n",(0,r.jsxs)(e.p,{children:["Examples of analytical functions are: ",(0,r.jsx)(e.code,{children:"min()"}),", ",(0,r.jsx)(e.code,{children:"max()"}),", ",(0,r.jsx)(e.code,{children:"avg()"}),", etc."]})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}}}]);